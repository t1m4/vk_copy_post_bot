name: CI
on:
    push:
      branches: [ "master" ]

jobs:
    # my_build_job:
    #   runs-on: ubuntu-latest
    #   steps:
    #       - uses: actions/checkout@v4
    
    #       - name: Run a one-line script
    #         run: echo Hello, world!
    
    #       - name: Run a multi-line script
    #         run: |
    #             echo Add other actions to build,
    #             echo test, and deploy your project.
    my_deploy:
      runs-on: ubuntu-latest
      environment: staging
      env:
          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
          # HOST_USER: ${{ secrets.HOST_USER }}
          # HOST_ADDRESS: ${{ secrets.HOST_ADDRESS }}
          # SSH_PRIVATE_KEY: ${{ vars.SSH_PRIVATE_KEY }}
          HOST_USER: ${{ vars.HOST_USER }}
          HOST_ADDRESS: ${{ vars.HOST_ADDRESS }}
      steps:
          - uses: actions/checkout@v4
          - name: Run a multi-line deploy script
            run: |
                echo Add other actions to build,
                echo test, and deploy your project.
                echo address $HOST_USER@$HOST_ADDRESS
                echo $SSH_PRIVATE_KEY >> private_key
                chmod 600 private_key
                tail -n 3 private_key
                ssh -o StrictHostKeyChecking=no -i private_key $HOST_USER@$HOST_ADDRESS
                ls
